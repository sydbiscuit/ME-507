<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tremor Mug 1: main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Screen Shot 2021-12-07 at 8.09.03 PM.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tremor Mug 1<span id="projectnumber">&#160;Version x3</span>
   </div>
   <div id="projectbrief">Tasks to create frequencies to counteract and stabilize hand tremors produced by those with Parkinson&#39;s Disease</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('main_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;PrintStream.h&gt;</code><br />
<code>#include &lt;Adafruit_MPU6050.h&gt;</code><br />
<code>#include &lt;Adafruit_Sensor.h&gt;</code><br />
<code>#include &lt;STM32FreeRTOS.h&gt;</code><br />
<code>#include &lt;Wire.h&gt;</code><br />
<code>#include &lt;<a class="el" href="shares_8h_source.html">shares.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="task__get__data_8h_source.html">task_get_data.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="task__put__in__array_8h_source.html">task_put_in_array.h</a>&gt;</code><br />
<code>#include &lt;task_fft.h&gt;</code><br />
<code>#include &lt;<a class="el" href="task__motor1_8h_source.html">task_motor1.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="task__motor2_8h_source.html">task_motor2.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed3ca567f1a7962547f9694e283e8ceb"><td class="memItemLeft" align="right" valign="top"><a id="aed3ca567f1a7962547f9694e283e8ceb" name="aed3ca567f1a7962547f9694e283e8ceb"></a>
Share&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>begin_recording</b> (&quot;Recording&quot;)</td></tr>
<tr class="memdesc:aed3ca567f1a7962547f9694e283e8ceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">A share which holds a counter of how many times a simulated event occured. <br /></td></tr>
<tr class="separator:aed3ca567f1a7962547f9694e283e8ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d47c2c26c7469d22dd6f77b5b627573"><td class="memItemLeft" align="right" valign="top"><a id="a1d47c2c26c7469d22dd6f77b5b627573" name="a1d47c2c26c7469d22dd6f77b5b627573"></a>
Queue&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>data_queue_pos_x</b> (256, &quot;pos_x&quot;)</td></tr>
<tr class="memdesc:a1d47c2c26c7469d22dd6f77b5b627573"><td class="mdescLeft">&#160;</td><td class="mdescRight">A queue that holds 256 positions in the x direction that's taken by a measurement task. <br /></td></tr>
<tr class="separator:a1d47c2c26c7469d22dd6f77b5b627573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a991a91a741e9d092b4bd4d719ff606d3"><td class="memItemLeft" align="right" valign="top"><a id="a991a91a741e9d092b4bd4d719ff606d3" name="a991a91a741e9d092b4bd4d719ff606d3"></a>
Queue&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>data_queue_pos_y</b> (256, &quot;pos_x&quot;)</td></tr>
<tr class="memdesc:a991a91a741e9d092b4bd4d719ff606d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">A queue that holds 256 positions in the y direction that's taken by a measurement task. <br /></td></tr>
<tr class="separator:a991a91a741e9d092b4bd4d719ff606d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93bb8aa1861c71ec6af15980dfc0f2b1"><td class="memItemLeft" align="right" valign="top"><a id="a93bb8aa1861c71ec6af15980dfc0f2b1" name="a93bb8aa1861c71ec6af15980dfc0f2b1"></a>
Queue&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>data_queue_ang_vel_x</b> (256, &quot;ang_vel_x&quot;)</td></tr>
<tr class="memdesc:a93bb8aa1861c71ec6af15980dfc0f2b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">A queue that holds 256 angular velocity measurements in the x direction that's taken by a measurement task. <br /></td></tr>
<tr class="separator:a93bb8aa1861c71ec6af15980dfc0f2b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a169e6918ad791f9233aed8a49b47517f"><td class="memItemLeft" align="right" valign="top"><a id="a169e6918ad791f9233aed8a49b47517f" name="a169e6918ad791f9233aed8a49b47517f"></a>
Queue&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>data_queue_ang_vel_y</b> (256, &quot;ang_vel_y&quot;)</td></tr>
<tr class="memdesc:a169e6918ad791f9233aed8a49b47517f"><td class="mdescLeft">&#160;</td><td class="mdescRight">A queue that holds 256 angular velocity measurements in the y direction that's taken by a measurement task. <br /></td></tr>
<tr class="separator:a169e6918ad791f9233aed8a49b47517f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa746e0ed43423926190a2b9e8b08280b"><td class="memItemLeft" align="right" valign="top"><a id="aa746e0ed43423926190a2b9e8b08280b" name="aa746e0ed43423926190a2b9e8b08280b"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>data_share_ang_vel_x</b> (&quot;ang_vel_x&quot;)</td></tr>
<tr class="memdesc:aa746e0ed43423926190a2b9e8b08280b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A share that holds 256 angular velocity measurements in the x direction in an array. <br /></td></tr>
<tr class="separator:aa746e0ed43423926190a2b9e8b08280b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4864d131399e18cbc257e3cd94f29b5d"><td class="memItemLeft" align="right" valign="top"><a id="a4864d131399e18cbc257e3cd94f29b5d" name="a4864d131399e18cbc257e3cd94f29b5d"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>data_share_ang_vel_y</b> (&quot;ang_vel_y&quot;)</td></tr>
<tr class="memdesc:a4864d131399e18cbc257e3cd94f29b5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A share that holds 256 angular velocity measurements in the y direction in an array. <br /></td></tr>
<tr class="separator:a4864d131399e18cbc257e3cd94f29b5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdac4525d8f47aa66f4211a7afeb0fdc"><td class="memItemLeft" align="right" valign="top"><a id="afdac4525d8f47aa66f4211a7afeb0fdc" name="afdac4525d8f47aa66f4211a7afeb0fdc"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>data_share_pos_x</b> (&quot;pos_x&quot;)</td></tr>
<tr class="memdesc:afdac4525d8f47aa66f4211a7afeb0fdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">A share that holds 256 x position measurements in an array. <br /></td></tr>
<tr class="separator:afdac4525d8f47aa66f4211a7afeb0fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaf9433bff58a57c3740dbb270046aeb"><td class="memItemLeft" align="right" valign="top"><a id="adaf9433bff58a57c3740dbb270046aeb" name="adaf9433bff58a57c3740dbb270046aeb"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>data_share_pos_y</b> (&quot;pos_y&quot;)</td></tr>
<tr class="memdesc:adaf9433bff58a57c3740dbb270046aeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">A share that holds 256 y position measurements in an array. <br /></td></tr>
<tr class="separator:adaf9433bff58a57c3740dbb270046aeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26eb9eaad70ab5d60f4c9df09e228943"><td class="memItemLeft" align="right" valign="top"><a id="a26eb9eaad70ab5d60f4c9df09e228943" name="a26eb9eaad70ab5d60f4c9df09e228943"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>fft_values_x</b> (&quot;fft_x&quot;)</td></tr>
<tr class="memdesc:a26eb9eaad70ab5d60f4c9df09e228943"><td class="mdescLeft">&#160;</td><td class="mdescRight">A share that holds a frequency that motor 1 will run at to counter tremor along x axis. <br /></td></tr>
<tr class="separator:a26eb9eaad70ab5d60f4c9df09e228943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe539c1d001931195b907b7cb71c2fac"><td class="memItemLeft" align="right" valign="top"><a id="abe539c1d001931195b907b7cb71c2fac" name="abe539c1d001931195b907b7cb71c2fac"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>fft_values_y</b> (&quot;fft_y&quot;)</td></tr>
<tr class="memdesc:abe539c1d001931195b907b7cb71c2fac"><td class="mdescLeft">&#160;</td><td class="mdescRight">A share that holds a frequency that motor 2 will run at to counter tremor along y axis. <br /></td></tr>
<tr class="separator:abe539c1d001931195b907b7cb71c2fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c626f59becb67075cd4a0c92eb6c4b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a1c626f59becb67075cd4a0c92eb6c4b1">task_control</a> (void *p_params)</td></tr>
<tr class="memdesc:a1c626f59becb67075cd4a0c92eb6c4b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which controls when data is taken.  <a href="main_8cpp.html#a1c626f59becb67075cd4a0c92eb6c4b1">More...</a><br /></td></tr>
<tr class="separator:a1c626f59becb67075cd4a0c92eb6c4b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up hardware and creates Tasks.  <a href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d">More...</a><br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top"><a id="afe461d27b9c48d5921c00d521181f12f" name="afe461d27b9c48d5921c00d521181f12f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>loop</b> ()</td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a51e3744ca22ee86001a2094dc4fdf697"><td class="memItemLeft" align="right" valign="top"><a id="a51e3744ca22ee86001a2094dc4fdf697" name="a51e3744ca22ee86001a2094dc4fdf697"></a>
Adafruit_MPU6050&#160;</td><td class="memItemRight" valign="bottom"><b>mpu</b></td></tr>
<tr class="memdesc:a51e3744ca22ee86001a2094dc4fdf697"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes Adafruit's MPU6050 sensor. <br /></td></tr>
<tr class="separator:a51e3744ca22ee86001a2094dc4fdf697"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This file contains the queues and shares implementation of all classes and functions used in the tremor mug project. There are five tasks - (1) Puts IMU data into queue (2) Takes data from queue and put it into an array to be analyzed (3) Position and Angular Velocity get passed through Fourier Transform to get frequency (4) Frequency is used by motor 1 (5) Frequency is used by motor 2.</p>
<dl class="section author"><dt>Author</dt><dd>Tatum Yee &amp; Sydney Lewis </dd></dl>
<dl class="section date"><dt>Date</dt><dd>6 Dec 2021 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4fc01d736fe50cf5b977f755b675f11d" name="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up hardware and creates Tasks. </p>
<p >Initializes serial communication, sets up pins for motor control, sets up IMU, and creates five tasks </p>

</div>
</div>
<a id="a1c626f59becb67075cd4a0c92eb6c4b1" name="a1c626f59becb67075cd4a0c92eb6c4b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c626f59becb67075cd4a0c92eb6c4b1">&#9670;&nbsp;</a></span>task_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_control </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which controls when data is taken. </p>
<p >Code from Professor Ridgely "https://canvas.calpoly.edu/courses/57860/files/5533517?wrap=1" </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>An unused pointer to nonexistent parameters </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="main_8cpp.html">main.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
